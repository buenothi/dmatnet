<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions"
	xmlns:dmat="http://java.sun.com/jsf/composite/composites">

<ui:composition>

	<dmat:barraBotoesComposite id="barraBotoesDadosCadastrais"
		disabledEditar="#{cadastroEmpresaMB.btnDadosCadastraisEditarDesativado}"
		actionListenerEditar="#{cadastroEmpresaMB.editarDadosCadastraisEmpresa}"
		updateEditar="formModulos"
		disabledCancelar="#{cadastroEmpresaMB.btnDadosCadastraisCancelarDesativado}"
		actionListenerCancelar="#{cadastroEmpresaMB.cancelarDadosCadastraisEmpresa}"
		updateCancelar="formModulos"
		disabledSalvar="#{cadastroEmpresaMB.btnDadosCadastraisSalvarDesativado}"
		actionListenerSalvar="#{cadastroEmpresaMB.salvarDadosCadastraisEmpresa}"
		updateSalvar="formModulos"
		labelNovo="#{msgs.NovoEmpresaDadosCadastrais}"
		disabledNovo="#{cadastroEmpresaMB.btnDadosCadastraisNovaEmpresaDesativado}"
		actionListenerNovo="#{cadastroEmpresaMB.novoDadosCadastraisEmpresa}"
		updateNovo="formModulos" renderedBtnNovo="true" />

	<p:accordionPanel id="acpDadosCadastrais">
		<p:tab id="tabDadosBasicos" title="#{msgs.DadosBasicos}">
			<h:panelGroup id="pngCadEmpresaEditar" layout="block"
				styleClass="formulario"
				rendered="#{cadastroEmpresaMB.btnDadosCadastraisEditarDesativado}">
				<p:panelGrid id="pngEditarDadoCadastrais"
					styleClass="tabelaSemBorda">
					<p:row>
						<p:column>
							<p:outputLabel value="#{msgs.DataCadastro}:" />
						</p:column>
						<p:column>
							<p:calendar locale="pt" showOn="button" showButtonPanel="true"
								pattern="dd/MM/yyyy" mask="true" size="8"
								value="#{cadastroEmpresaMB.dadosCadastraisAtual.dataInicioCadastro}" />
						</p:column>
						<p:column rowspan="5">
							<p:fileUpload style="height: 100%"
								mode="advanced" dragDropSupport="true" 
								sizeLimit="100000" allowTypes="/(\.|\/)(gif|jpe?g|png)$/" />
						</p:column>
					</p:row>

					<p:row>
						<p:column>
							<p:outputLabel value="#{msgs.TipoInscricao}:" />
						</p:column>

						<p:column>
							<p:selectOneMenu style="width:100px"
								value="#{cadastroEmpresaMB.dadosCadastraisAtual.tipoInscricao}">
								<p:ajax
									listener="#{cadastroEmpresaMB.alterarMascaraPessoaJuridica}"
									update="formModulos:formCadEmpresa:tbwCadastroEmpresa:acpDadosCadastrais:ipmInscricao" />
								<f:selectItem itemValue="1" itemLabel="CNPJ" />
								<f:selectItem itemValue="2" itemLabel="CPF" />
							</p:selectOneMenu>
						</p:column>
					</p:row>

					<p:row>
						<p:column>
							<p:outputLabel value="#{msgs.Inscricao}:" />
						</p:column>
						<p:column>
							<p:inputMask id="ipmInscricao" converter="cnpjCpfConverter"
								mask="#{cadastroEmpresaMB.mascaraPessoaJuridica}"
								value="#{cadastroEmpresaMB.dadosCadastraisAtual.numCNPJ}" />
						</p:column>
					</p:row>

					<p:row>
						<p:column>
							<p:outputLabel value="#{msgs.RazaoSocial}:" />
						</p:column>
						<p:column>
							<p:inputText maxlength="250" size="62"
								value="#{cadastroEmpresaMB.dadosCadastraisAtual.razaoSocial}" />
						</p:column>
					</p:row>

					<p:row>
						<p:column>
							<p:outputLabel value="#{msgs.FAP}:" />
						</p:column>

						<p:column>
							<h:panelGroup>
								<p:inputMask mask="9,999" maxlength="250" size="5" />
								<p:commandButton value="#{msgs.ProcessoFAP}" />
							</h:panelGroup>
						</p:column>
					</p:row>
				</p:panelGrid>

				<p:panelGrid columns="4" styleClass="tabelaSemBorda">
					<p:outputLabel value="#{msgs.CodClassificacaoTributaria}" />
					<p:selectOneMenu />

					<p:outputLabel value="#{msgs.CodNaturezaJuridica}" />
					<p:selectOneMenu
						value="#{cadastroEmpresaMB.dadosCadastraisAtual.codNaturezaJuridica}" />

					<p:outputLabel value="#{msgs.CodIndicativoCooperativa}" />
					<p:selectOneMenu
						value="#{cadastroEmpresaMB.dadosCadastraisAtual.codIndicativoCooperativa}" />

					<p:outputLabel value="#{msgs.CodIndicativoConstrucao}" />
					<p:selectOneMenu
						value="#{cadastroEmpresaMB.dadosCadastraisAtual.codIndicativoConstrucao}" />

					<p:outputLabel value="#{msgs.CodIndicativoDesoneracaoFolha}" />
					<p:selectOneMenu
						value="#{cadastroEmpresaMB.dadosCadastraisAtual.codIndicativoDesoneracaoFolha}" />

					<p:outputLabel value="#{msgs.CodIndicativoRegEletronico}" />
					<p:selectOneMenu
						value="#{cadastroEmpresaMB.dadosCadastraisAtual.codIndicativoRegEletronico}" />
				</p:panelGrid>

				<p:panelGrid columns="2" styleClass="tabelaSemBorda">
					<p:outputLabel value="#{msgs.MultiplasRubricas}" />
					<p:selectBooleanButton id="value2" onLabel="#{msgs.Sim}"
						offLabel="#{msgs.Nao}" onIcon="ui-icon-check"
						offIcon="ui-icon-close" style="width:120px" />
				</p:panelGrid>

			</h:panelGroup>

			<h:panelGroup id="pngCadEmpresaExibir" layout="block"
				styleClass="formulario"
				rendered="#{cadastroEmpresaMB.btnDadosCadastraisCancelarDesativado}">
				<p:panelGrid styleClass="tabelaSemBorda">
					<p:row>
						<p:column>
							<p:outputLabel value="#{msgs.DataCadastro}:" />
						</p:column>
						<p:column>
							<p:outputLabel
								value="#{cadastroEmpresaMB.dadosCadastraisAtual.dataInicioCadastro}">
								<f:convertDateTime type="both" timeZone="GMT-3"
									pattern="dd/MM/YYYY" />
							</p:outputLabel>
						</p:column>
						<p:column rowspan="5">teste</p:column>
					</p:row>

					<p:row>
						<p:column>
							<p:outputLabel value="#{msgs.TipoInscricao}:" />
						</p:column>

						<p:column>
							<p:outputLabel
								value="#{cadastroEmpresaMB.dadosCadastraisAtual.tipoInscricao}" />
						</p:column>
					</p:row>

					<p:row>
						<p:column>
							<p:outputLabel value="#{msgs.Inscricao}:" />
						</p:column>

						<p:column>
							<p:outputLabel
								value="#{cadastroEmpresaMB.dadosCadastraisAtual.numCNPJ}">
								<f:converter converterId="cnpjCpfConverter" />
							</p:outputLabel>
						</p:column>
					</p:row>

					<p:row>
						<p:column>
							<p:outputLabel value="#{msgs.RazaoSocial}:" />
						</p:column>

						<p:column>
							<p:outputLabel
								value="#{cadastroEmpresaMB.dadosCadastraisAtual.razaoSocial}"
								converter="stringConverter" />
						</p:column>
					</p:row>

					<p:row>
						<p:column>
							<p:outputLabel value="#{msgs.FAP}:" />
						</p:column>

						<p:column>
							<h:panelGroup>
								<p:outputLabel
									value="#{cadastroEmpresaMB.empresaFap.numProcessoFAP}" />
								<p:commandButton value="#{msgs.ProcessoFAP}" />
							</h:panelGroup>
						</p:column>

					</p:row>
				</p:panelGrid>

				<p:panelGrid columns="2" styleClass="tabelaSemBorda">
					<p:commandButton value="#{msgs.CodigosESocial}"
						onclick="PF('dlgCodigoESocial').show()" />
				</p:panelGrid>

				<p:dialog header="#{msgs.CodigosESocial}"
					widgetVar="dlgCodigoESocial" closable="true" resizable="true"
					width="1000" modal="true">

					<p:panelGrid columns="4" styleClass="tabelaSemBorda">
						<p:outputLabel value="#{msgs.CodClassificacaoTributaria}:" />
						<p:outputLabel
							value="#{cadastroEmpresaMB.dadosCadastraisAtual.codClassificacaoTributaria}" />

						<p:outputLabel value="#{msgs.CodNaturezaJuridica}:" />
						<p:outputLabel
							value="#{cadastroEmpresaMB.dadosCadastraisAtual.codNaturezaJuridica}" />

						<p:outputLabel value="#{msgs.CodIndicativoCooperativa}:" />
						<p:outputLabel
							value="#{cadastroEmpresaMB.dadosCadastraisAtual.codIndicativoCooperativa}" />

						<p:outputLabel value="#{msgs.CodIndicativoConstrucao}:" />
						<p:outputLabel
							value="#{cadastroEmpresaMB.dadosCadastraisAtual.codIndicativoConstrucao}" />

						<p:outputLabel value="#{msgs.CodIndicativoDesoneracaoFolha}:" />
						<p:outputLabel
							value="#{cadastroEmpresaMB.dadosCadastraisAtual.codIndicativoDesoneracaoFolha}" />

						<p:outputLabel value="#{msgs.CodIndicativoRegEletronico}:" />
						<p:outputLabel
							value="#{cadastroEmpresaMB.dadosCadastraisAtual.codIndicativoRegEletronico}" />
					</p:panelGrid>

					<p:panelGrid columns="2" styleClass="tabelaSemBorda">
						<p:outputLabel value="#{msgs.MultiplasRubricas}:" />
						<p:outputLabel
							value="#{cadastroEmpresaMB.dadosCadastraisAtual.multiplasTabRubricas}" />
					</p:panelGrid>
				</p:dialog>

			</h:panelGroup>
		</p:tab>

		<p:tab title="#{msgs.EmpresaDadosIsencao}">
		</p:tab>

		<p:tab title="#{msgs.OrganismoInternacional}">
		</p:tab>

		<p:tab title="#{msgs.EmpresaSoftwareHouse}">
		</p:tab>

		<p:tab title="#{msgs.EmpresaDadosComplementares}">
		</p:tab>

		<p:tab title="#{msgs.Historico}">
			<h:panelGrid columns="2" cellpadding="10">
				<p:dataTable paginator="true" rows="10" scrollable="true"
					styleClass="dataTable"
					emptyMessage="#{msgs.ListaHistoricoDadosCadastrais}"
					value="#{cadastroEmpresaMB.dadosCadastraisHistorico}"
					paginatorAlwaysVisible="false" var="cadastro"
					sortBy="#{cadastro.dataInicioCadastro}" sortOrder="descending"
					editable="true" rowKey="#{cadastro.id}">

					<!-- 					<p:ajax event="rowEdit"
						listener="#{cadastroEmpresaMB.onRowEditDadosCadastraisEmpresa}"
						update="formModulos" />
					<p:ajax event="rowEditCancel"
						listener="#{cadastroEmpresaMB.onRowCancelDadosCadastraisEmpresa}"
						update="formModulos" /> -->

					<p:column headerText="#{msgs.DataCadastro}" width="100">
						<p:cellEditor>
							<f:facet name="output">
								<p:outputLabel value="#{cadastro.dataInicioCadastro}"
									style="font-size: 9pt;">
									<f:convertDateTime pattern="dd/MM/yyyy" />
								</p:outputLabel>
							</f:facet>
							<f:facet name="input">
								<p:calendar value="#{cadastro.dataInicioCadastro}" locale="pt"
									showOn="button" showButtonPanel="true" pattern="dd/MM/yyyy"
									mask="true" size="8" />
							</f:facet>
						</p:cellEditor>
					</p:column>
					<p:column headerText="#{msgs.DataTermino}" width="100">
						<p:cellEditor>
							<f:facet name="output">
								<p:outputLabel value="#{cadastro.dataFimCadastro}"
									style="font-size: 9pt;">
									<f:convertDateTime pattern="dd/MM/yyyy" />
								</p:outputLabel>
							</f:facet>
							<f:facet name="input">
								<p:calendar value="#{cadastro.dataFimCadastro}" locale="pt"
									showOn="button" showButtonPanel="true" pattern="dd/MM/yyyy"
									mask="true" size="8" />
							</f:facet>
						</p:cellEditor>
					</p:column>
					<p:column headerText="#{msgs.TipoInscricao}" width="80">
						<p:cellEditor>
							<f:facet name="output">
								<p:outputLabel value="#{cadastro.tipoInscricao}"
									style="font-size: 9pt;" />
							</f:facet>
							<f:facet name="input">
								<p:selectOneMenu style="width:100%; font-size: 9pt;"
									value="#{cadastro.tipoInscricao}">
									<f:selectItem itemValue="1" itemLabel="CNPJ" />
									<f:selectItem itemValue="2" itemLabel="CPF" />
								</p:selectOneMenu>
							</f:facet>
						</p:cellEditor>
					</p:column>
					<p:column headerText="#{msgs.Inscricao}" width="160">
						<p:cellEditor>
							<f:facet name="output">
								<p:outputLabel value="#{cadastro.numCNPJ}"
									style="font-size: 9pt;">
									<f:converter converterId="cnpjCpfConverter" />
								</p:outputLabel>
							</f:facet>
							<f:facet name="input">
								<p:inputMask id="ipmInscricao" converter="cnpjCpfConverter"
									mask="#{cadastroEmpresaMB.mascaraPessoaJuridica}"
									value="#{cadastro.numCNPJ}" style="font-size: 9pt;" />
							</f:facet>
						</p:cellEditor>
					</p:column>
					<p:column headerText="#{msgs.RazaoSocial}" width="300">
						<p:cellEditor>
							<f:facet name="output">
								<p:outputLabel value="#{cadastro.razaoSocial}"
									style="font-size: 9pt;">
									<f:converter converterId="stringConverter" />
								</p:outputLabel>
							</f:facet>
							<f:facet name="input">
								<p:inputText value="#{cadastro.razaoSocial}"
									style="font-size: 9pt; width: 100%" />
							</f:facet>
						</p:cellEditor>
					</p:column>
					<p:column headerText="#{msgs.CodClassificacaoTributaria}"
						width="90">
						<p:cellEditor>
							<f:facet name="output">
								<p:outputLabel value="#{cadastro.codClassificacaoTributaria}"
									style="font-size: 9pt;" />
							</f:facet>
							<f:facet name="input">
								<p:selectOneMenu style="font-size: 9pt;" />
							</f:facet>
						</p:cellEditor>
					</p:column>
					<p:column headerText="#{msgs.CodNaturezaJuridica}" width="90">
						<p:cellEditor>
							<f:facet name="output">
								<p:outputLabel value="#{cadastro.codNaturezaJuridica}"
									style="font-size: 9pt;" />
							</f:facet>
							<f:facet name="input">
								<p:selectOneMenu value="#{cadastro.codNaturezaJuridica}"
									style="font-size: 9pt;" />
							</f:facet>
						</p:cellEditor>
					</p:column>
					<p:column headerText="#{msgs.CodIndicativoCooperativa}" width="90">
						<p:cellEditor>
							<f:facet name="output">
								<p:outputLabel value="#{cadastro.codIndicativoCooperativa}"
									style="font-size: 9pt;" />
							</f:facet>
							<f:facet name="input">
								<p:selectOneMenu value="#{cadastro.codIndicativoCooperativa}"
									style="font-size: 9pt;" />
							</f:facet>
						</p:cellEditor>
					</p:column>
					<p:column headerText="#{msgs.CodIndicativoConstrucao}" width="90">
						<p:cellEditor>
							<f:facet name="output">
								<p:outputLabel value="#{cadastro.codIndicativoConstrucao}"
									style="font-size: 9pt;" />
							</f:facet>
							<f:facet name="input">
								<p:selectOneMenu value="#{cadastro.codIndicativoConstrucao}"
									style="font-size: 9pt;" />
							</f:facet>
						</p:cellEditor>
					</p:column>
					<p:column headerText="#{msgs.CodIndicativoDesoneracaoFolha}"
						width="90">
						<p:cellEditor>
							<f:facet name="output">
								<p:outputLabel value="#{cadastro.codIndicativoDesoneracaoFolha}"
									style="font-size: 9pt;" />
							</f:facet>
							<f:facet name="input">
								<p:selectOneMenu
									value="#{cadastro.codIndicativoDesoneracaoFolha}"
									style="font-size: 9pt;" />
							</f:facet>
						</p:cellEditor>
					</p:column>
					<p:column headerText="#{msgs.CodIndicativoRegEletronico}"
						width="90">
						<p:cellEditor>
							<f:facet name="output">
								<p:outputLabel value="#{cadastro.codIndicativoRegEletronico}"
									style="font-size: 9pt;" />
							</f:facet>
							<f:facet name="input">
								<p:selectOneMenu value="#{cadastro.codIndicativoRegEletronico}"
									style="font-size: 9pt;" />
							</f:facet>
						</p:cellEditor>
					</p:column>

					<p:column style="width:55px">
						<p:rowEditor />
					</p:column>

					<p:column style="width:55px">
						<p:commandButton icon="fa fa-trash" />
					</p:column>

				</p:dataTable>
			</h:panelGrid>
		</p:tab>

	</p:accordionPanel>
</ui:composition>
</html>