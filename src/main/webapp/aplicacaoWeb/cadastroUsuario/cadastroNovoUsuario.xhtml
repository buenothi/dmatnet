<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions"
	xmlns:dmat="http://java.sun.com/jsf/composite/composites">

<ui:composition>
	<p:wizard id="wzdUsuario" widgetVar="wzdUsuario"
		backLabel="#{msgs.Voltar}" nextLabel="#{msgs.Avancar}"
		onnext="PF('dlgCriarUsuario').initPosition()"
		onback="PF('dlgCriarUsuario').initPosition()">

		<p:tab title="#{msgs.DadosUsuario}">
			<p:panel header="#{msgs.DadosUsuario}" closable="false">
				<p:messages id="msDadosUsuarios" showDetail="true" closable="true" />
				<p:panelGrid id="dadosUsuario" columns="2"
					styleClass="tabelaSemBorda">
					<p:outputLabel value="#{msgs.DataCadastro}" />
					<p:calendar locale="pt" showOn="button" showButtonPanel="true"
						pattern="dd/MM/yyyy" mask="true" size="8"
						value="#{cadastroUsuarioMB.usuarioNovo.dataCadastroPessoa}" />

					<p:outputLabel value="#{msgs.Nome}" />
					<p:inputText id="iptNomePessoa" size="22"
						value="#{cadastroUsuarioMB.usuarioNovo.nome}" />

					<p:outputLabel value="#{msgs.Genero}" />
					<p:selectOneRadio value="#{cadastroUsuarioMB.usuarioNovo.genero}">
						<f:selectItem itemLabel="#{msgs.Masculino}" itemValue="1" />
						<f:selectItem itemLabel="#{msgs.Feminino}" itemValue="2" />
					</p:selectOneRadio>
				</p:panelGrid>
			</p:panel>
		</p:tab>

		<p:tab title="#{msgs.DocumentosPessoaFisica}">
			<p:panel header="#{msgs.DocumentosPessoaFisica}" closable="false">
				<p:messages id="msDocumentosContato" showDetail="true"
					closable="true" />
				<p:tabView>
					<p:tab title="RIC">
						<p:panelGrid columns="2" styleClass="tabelaSemBorda">
							<p:outputLabel value="#{msgs.NumeroRic}" />
							<p:inputNumber
								value="#{cadastroUsuarioMB.documentosPessoaisUsuario.numRic}" />
							<p:outputLabel value="#{msgs.OrgExpedidorRic}" />
							<p:inputText
								value="#{cadastroUsuarioMB.documentosPessoaisUsuario.ricOrgExpedidor}" />
							<p:outputLabel value="#{msgs.DataExpedicaoRic}" />
							<p:calendar locale="pt" showOn="button" showButtonPanel="true"
								pattern="dd/MM/yyyy" mask="true" size="8"
								value="#{cadastroUsuarioMB.documentosPessoaisUsuario.ricDataExpedicao}" />
						</p:panelGrid>
					</p:tab>

					<p:tab title="RG">
						<p:panelGrid columns="2" styleClass="tabelaSemBorda">
							<p:outputLabel value="#{msgs.NumeroRG}" />
							<p:inputNumber
								value="#{cadastroUsuarioMB.documentosPessoaisUsuario.numRG}" />
							<p:outputLabel value="#{msgs.OrgExpedidorRG}" />
							<p:inputText
								value="#{cadastroUsuarioMB.documentosPessoaisUsuario.rgOrgExpedidor}" />
							<p:outputLabel value="#{msgs.DataExpedicaoRG}" />
							<p:calendar locale="pt" showOn="button" showButtonPanel="true"
								pattern="dd/MM/yyyy" mask="true" size="8"
								value="#{cadastroUsuarioMB.documentosPessoaisUsuario.rgDataExpedicao}" />
						</p:panelGrid>
					</p:tab>

					<p:tab title="CPF">
						<p:panelGrid columns="2" styleClass="tabelaSemBorda">
							<p:outputLabel value="#{msgs.NumeroCPF}" />
							<p:inputMask mask="999.999.999-99" converter="cnpjCpfConverter"
								value="#{cadastroUsuarioMB.documentosPessoaisUsuario.numCPF}" />
						</p:panelGrid>
					</p:tab>

					<p:tab title="RNE">
						<p:panelGrid columns="2" styleClass="tabelaSemBorda">
							<p:outputLabel value="#{msgs.NumeroRNE}" />
							<p:inputNumber
								value="#{cadastroUsuarioMB.documentosPessoaisUsuario.numRNE}" />
							<p:outputLabel value="#{msgs.OrgExpedidorRNE}" />
							<p:inputText
								value="#{cadastroUsuarioMB.documentosPessoaisUsuario.rneOrgExpedidor}" />
							<p:outputLabel value="#{msgs.DataExpedicaoRNE}" />
							<p:calendar locale="pt" showOn="button" showButtonPanel="true"
								pattern="dd/MM/yyyy" mask="true" size="8"
								value="#{cadastroUsuarioMB.documentosPessoaisUsuario.rneDataExpedicao}" />
						</p:panelGrid>
					</p:tab>

					<p:tab title="CNH">
						<p:panelGrid columns="2" styleClass="tabelaSemBorda">
							<p:outputLabel value="#{msgs.NumeroCNH}" />
							<p:inputNumber
								value="#{cadastroUsuarioMB.documentosPessoaisUsuario.numCNH}" />
							<p:outputLabel value="#{msgs.UFCNH}" />
							<p:inputText size="2"
								value="#{cadastroUsuarioMB.documentosPessoaisUsuario.cnhUf}" />
							<p:outputLabel value="#{msgs.DataExpedicaoCNH}" />
							<p:calendar locale="pt" showOn="button" showButtonPanel="true"
								pattern="dd/MM/yyyy" mask="true" size="8"
								value="#{cadastroUsuarioMB.documentosPessoaisUsuario.cnhDataExpedicao}" />
							<p:outputLabel value="#{msgs.DataValidadeCNH}" />
							<p:calendar locale="pt" showOn="button" showButtonPanel="true"
								pattern="dd/MM/yyyy" mask="true" size="8"
								value="#{cadastroUsuarioMB.documentosPessoaisUsuario.cnhValidade}" />
							<p:outputLabel value="#{msgs.DataPrimeiraCNH}" />
							<p:calendar locale="pt" showOn="button" showButtonPanel="true"
								pattern="dd/MM/yyyy" mask="true" size="8"
								value="#{cadastroUsuarioMB.documentosPessoaisUsuario.cnhPrimeiraEmissao}" />
							<p:outputLabel value="#{msgs.CategoriaCNH}" />
							<p:inputText
								value="#{cadastroUsuarioMB.documentosPessoaisUsuario.cnhCategoria}" />
						</p:panelGrid>
					</p:tab>
				</p:tabView>
			</p:panel>
		</p:tab>

		<p:tab title="#{msgs.Endereco}">
			<p:panel header="#{msgs.Endereco}" closable="false">
				<p:messages id="msEndereco" showDetail="true" closable="true" />
				<dmat:enderecoComposite id="dmatEnderecoContato"
					enderecoRendered="true" barraBotoesRendered="false"
					renderedHistorico="false"
					logradouroTipo="#{cadastroUsuarioMB.enderecoUsuarioAtual.logradouro.nomeLogradouro}"
					logradouro="#{cadastroUsuarioMB.enderecoUsuarioAtual.logradouro}"
					logradouroNome="#{cadastroUsuarioMB.enderecoUsuarioAtual.logradouroNome}"
					logradouroNumero="#{cadastroUsuarioMB.enderecoUsuarioAtual.logradouroNumero}"
					logradouroComplemento="#{cadastroUsuarioMB.enderecoUsuarioAtual.logradouroComplemento}"
					bairro="#{cadastroUsuarioMB.enderecoUsuarioAtual.bairro}"
					cep="#{cadastroUsuarioMB.enderecoUsuarioAtual.cep}"
					caixaPostal="#{cadastroUsuarioMB.enderecoUsuarioAtual.caixaPostal}"
					cidade="#{cadastroUsuarioMB.enderecoUsuarioAtual.cidade}"
					estado="#{cadastroUsuarioMB.enderecoUsuarioAtual.estado}"
					dataCadastro="#{cadastroUsuarioMB.enderecoUsuarioAtual.dataInicioEndereco}"
					enderecoHistorico="#{cadastroUsuarioMB.enderecosUsuarioHistorico}"
					ajaxComponentRender="@this, formModulos:formCadEmpresa:tbwCadastroEmpresa:dmatEnderecoContato:acpEndereco:listCidade"
					disabledEditar="#{cadastroUsuarioMB.btnEnderecoUsuarioEditarDesativado}"
					actionListenerEditar="#{cadastroUsuarioMB.editarEnderecoUsuario}"
					enderecoEditarRender="true"
					updateEditar="formModulos:formCadEmpresa:tbwCadastroEmpresa:wzdUsuario"
					disabledCancelar="false"
					actionListenerCancelar="#{cadastroUsuarioMB.cancelarEnderecoUsuario}"
					updateCancelar="formModulos:formCadEmpresa:tbwCadastroEmpresa:wzdUsuario"
					disabledSalvar="#{cadastroUsuarioMB.btnEnderecoUsuarioSalvarDesativado}"
					actionListenerSalvar="#{cadastroUsuarioMB.salvarEnderecoUsuario}"
					updateSalvar="formModulos:formCadEmpresa:tbwCadastroEmpresa:wzdUsuario"
					disabledNovo="#{cadastroUsuarioMB.btnEnderecoUsuarioNovoDesativado}"
					actionListenerNovo="#{cadastroUsuarioMB.novoEnderecoUsuario}"
					updateNovo="formModulos:formCadEmpresa:tbwCadastroEmpresa:wzdUsuario"
					disabledExcluir="#{cadastroUsuarioMB.btnEnderecoUsuarioExcluirDesativado}"
					actionListenerExcluir="#{cadastroUsuarioMB.excluirEnderecoUsuario}"
					updateExcluir="formModulos:formCadEmpresa:tbwCadastroEmpresa:wzdUsuario"
					renderedBtnExcluir="#{cadastroEmpresaMB.btnEnderecoEmpresaExcluirRender}"
					messageConfirmaExcluir="#{msgs.DeletarEnderecoUsuario}"
					messageHeaderExcluir="#{msgs.Confirmar}"
					messageLabelExcluir="#{msgs.Excluir}">
				</dmat:enderecoComposite>
			</p:panel>
		</p:tab>

		<p:tab title="#{msgs.ContatoUsuario}">
			<p:panel header="#{msgs.ContatoUsuario}" closable="false">
				<p:messages id="msEmail" showDetail="true" closable="true" />
				<p:tabView>
					<p:tab title="#{msgs.Email}">
						<p:panel header="#{msgs.Email}" closable="false">
							<p:panelGrid columns="2" styleClass="tabelaSemBorda">
								<p:outputLabel value="#{msgs.Email}" />
								<p:inputText id="iptEmailUsuario" size="22" immediate="true"
									value="#{cadastroUsuarioMB.emailUsuario.nomeEmail}" />

								<p:outputLabel value="#{msgs.EmailTipo}" />
								<p:selectOneMenu style="width:100%"
									value="#{cadastroUsuarioMB.emailUsuario.tipoEmail}"
									effect="fade" converter="emailTipoConverter">
									<f:selectItems value="#{emailTipoMB.emailsTipos}"
										var="emailTipo" itemLabel="#{emailTipo.tipo}"
										itemValue="#{emailTipo}" />
								</p:selectOneMenu>

								<p:outputLabel value="#{msgs.EmailPrincipal}" />
								<p:selectBooleanButton
									value="#{cadastroUsuarioMB.emailUsuario.emailPrincipal}"
									onLabel="#{msgs.Sim}" offLabel="#{msgs.Nao}"
									onIcon="ui-icon-check" offIcon="ui-icon-close" />

								<p:spacer width="100%" height="5px" />
								<p:toolbar>
									<f:facet name="left">
										<p:commandButton value="#{msgs.Adicionar}"
											actionListener="#{cadastroUsuarioMB.adicionarEmailContato}"
											update="formModulos:formCadEmpresa:tbwCadastroEmpresa:wzdUsuario" />
										<p:commandButton value="#{msgs.Cancelar}"
											update="formModulos:formCadEmpresa:tbwCadastroEmpresa:wzdUsuario" />
									</f:facet>
								</p:toolbar>

							</p:panelGrid>

							<p:spacer width="100%" height="2px" />

							<p:dataTable paginator="true" rows="2" scrollable="true"
								styleClass="dataTable" emptyMessage="#{msgs.ListaEmailVazio}"
								value="#{cadastroUsuarioMB.emailsUsuario}"
								paginatorAlwaysVisible="false" var="email"
								sortBy="#{email.idEmail}" sortOrder="descending" editable="true"
								rowKey="#{email.idEmail}">

								<p:column headerText="#{msgs.Email}">
									<p:cellEditor>
										<f:facet name="output">
											<p:outputLabel value="#{email.nomeEmail}" />
										</f:facet>
										<f:facet name="input">
											<p:inputText value="#{email.nomeEmail}" />
										</f:facet>
									</p:cellEditor>
								</p:column>
								<p:column headerText="#{msgs.EmailTipo}">
									<p:cellEditor>
										<f:facet name="output">
											<p:outputLabel value="#{email.tipoEmail.tipo}" />
										</f:facet>
										<f:facet name="input">
											<p:selectOneMenu style="width:100%"
												value="#{email.tipoEmail}" converter="emailTipoConverter"
												immediate="true">
												<f:selectItems value="#{emailTipoMB.emailsTipos}"
													var="emailTipo" itemLabel="#{emailTipo.tipo}"
													itemValue="#{emailTipo}" />
											</p:selectOneMenu>
										</f:facet>
									</p:cellEditor>
								</p:column>
								<p:column headerText="#{msgs.EmailPrincipalTab}">
									<p:cellEditor>
										<f:facet name="output">
											<p:outputLabel value="#{email.emailPrincipal}" />
										</f:facet>
										<f:facet name="input">
											<p:selectBooleanButton value="#{email.emailPrincipal}"
												onLabel="#{msgs.Sim}" offLabel="#{msgs.Nao}"
												onIcon="ui-icon-check" offIcon="ui-icon-close" />
										</f:facet>
									</p:cellEditor>
								</p:column>

								<p:column style="width:55px">
									<p:rowEditor />
								</p:column>

								<p:column style="width:55px">
									<p:commandButton icon="fa fa-trash" />
								</p:column>

							</p:dataTable>
						</p:panel>
					</p:tab>

					<p:tab title="#{msgs.Telefone}">
						<p:panel header="#{msgs.Telefone}" closable="false">
							<p:panelGrid columns="2" styleClass="tabelaSemBorda">
								<p:outputLabel value="#{msgs.Telefone}" />
								<p:inputMask id="ipmTel" mask="+ 99 (99) 9999-9999" size="22"
									value="#{cadastroUsuarioMB.telefoneUsuario.numeroTelefone}" />
								<p:outputLabel value="#{msgs.TelefoneTipo}" />
								<p:selectOneMenu style="width:100%"
									value="#{cadastroUsuarioMB.telefoneUsuario.tipoTelefone}"
									effect="fade" converter="telefoneTipoConverter">
									<f:selectItems value="#{telefoneTipoMB.telefonesTipos}"
										var="telefoneTipo" itemLabel="#{telefoneTipo.tipo}"
										itemValue="#{telefoneTipo}" />
								</p:selectOneMenu>

								<p:spacer width="100%" height="5px" />

								<p:toolbar>
									<f:facet name="left">
										<p:commandButton value="#{msgs.Adicionar}"
											actionListener="#{cadastroUsuarioMB.adicionarTelefoneContato}"
											update="formModulos:formCadEmpresa:tbwCadastroEmpresa:wzdUsuario" />
										<p:commandButton value="#{msgs.Cancelar}"
											update="formModulos:formCadEmpresa:tbwCadastroEmpresa:wzdUsuario" />
									</f:facet>
								</p:toolbar>
							</p:panelGrid>

							<p:spacer width="100%" height="2px" />

							<p:dataTable paginator="true" rows="2" scrollable="true"
								styleClass="dataTable" emptyMessage="#{msgs.ListaContatoVazio}"
								value="#{cadastroUsuarioMB.telefonesUsuario}"
								paginatorAlwaysVisible="false" var="telefone"
								sortBy="#{telefone.idTelefone}" sortOrder="descending"
								editable="true" rowKey="#{telefone.idTelefone}">

								<p:column headerText="#{msgs.Telefone}">
									<p:cellEditor>
										<f:facet name="output">
											<p:outputLabel value="#{telefone.numeroTelefone}" />
										</f:facet>
										<f:facet name="input">
											<p:inputMask mask="+ 99 (99) 9999-9999"
												value="#{telefone.numeroTelefone}" style="width: 100%">
											</p:inputMask>
										</f:facet>
									</p:cellEditor>
								</p:column>
								<p:column headerText="#{msgs.TelefoneTipo}">
									<p:cellEditor>
										<f:facet name="output">
											<p:outputLabel value="#{telefone.tipoTelefone.tipo}" />
										</f:facet>
										<f:facet name="input">
											<p:selectOneMenu style="width:100%"
												value="#{telefone.tipoTelefone}"
												converter="telefoneTipoConverter" immediate="true">
												<f:selectItems value="#{telefoneTipoMB.telefonesTipos}"
													var="telefoneTipo" itemLabel="#{telefoneTipo.tipo}"
													itemValue="#{telefoneTipo}" />
											</p:selectOneMenu>
										</f:facet>
									</p:cellEditor>
								</p:column>

								<p:column style="width:55px">
									<p:rowEditor />
								</p:column>

								<p:column style="width:55px">
									<p:commandButton icon="fa fa-trash"
										actionListener="#{cadastroUsuarioMB.removerTelefoneContatoDaLista(telefone)}"
										update="formModulos:formCadEmpresa:tbwCadastroEmpresa:wzdUsuario">
										<f:setPropertyActionListener value="#{telefone}"
											target="#{cadastroUsuarioMB.telefoneUsuarioExcluir}" />
										<p:confirm header="#{msgs.Confirmar}" message=""
											icon="ui-icon-alert" />
									</p:commandButton>
								</p:column>

							</p:dataTable>
						</p:panel>
					</p:tab>
					<p:tab title="#{msgs.Login}">
						<p:panel header="#{msgs.Login}" closable="false">
							<p:panelGrid columns="2" styleClass="tabelaSemBorda">
								<p:outputLabel value="#{msgs.Login}" />
								<p:inputText id="iptLogin" size="22"
									value="#{cadastroUsuarioMB.usuarioNovo.login}" />
								<p:outputLabel value="#{msgs.Senha}" />
								<p:commandButton id="btnGerarSenhaProvisoria"
									value="#{msgs.BotaoGerarSenha}" />
							</p:panelGrid>
						</p:panel>
					</p:tab>
				</p:tabView>
			</p:panel>
		</p:tab>

		<p:tab title="#{msgs.Empresas}">
			<p:panel header="#{msgs.Empresas}" closable="false">
				<p:panelGrid columns="1" styleClass="tabelaSemBorda">
					<h:outputText
						value="#{msgs.textoSelecionarMultiplasEmpresasUsuario}" />
					<p:pickList id="pclEmpresasUsuario" immediate="true"
						value="#{cadastroUsuarioMB.empresasUsuario}" var="empresa"
						itemLabel="#{empresa.nome}" itemValue="#{empresa}"
						converter="empresaConverter" showSourceFilter="true"
						showTargetFilter="true" filterMatchMode="contains">
						<f:facet name="sourceCaption">
							<h:outputText value="#{msgs.EmpresaDisponivel}"
								converter="stringConverter" />
						</f:facet>
						<f:facet name="targetCaption">
							<h:outputText value="#{msgs.EmpresaAtribuida}"
								converter="stringConverter" />
						</f:facet>
					</p:pickList>
				</p:panelGrid>
			</p:panel>
		</p:tab>

		<p:tab title="#{msgs.Salvar}">
			<p:panel header="#{msgs.Salvar}" closable="false">
				<p:spacer height="20px" width="100%" />
				<p:outputLabel value="#{msgs.UltimaEtapaCadastroUsuario}" />
				<p:spacer height="10px" width="100%" />
				<p:panelGrid columns="2" styleClass="tabelaSemBorda">
					<p:commandButton value="#{msgs.Salvar}"
						onclick="PF('dlgCriarUsuario').hide()"
						actionListener="#{cadastroUsuarioMB.salvarUsuarioNaEmpresaSelecionada}">
						<p:ajax
							update="formModulos:formCadEmpresa:tbwCadastroEmpresa:wzdUsuario"
							resetValues="true"
							oncomplete="PF('wzdUsuario').loadStep(PF('wzdUsuario').cfg.steps[0], true);" />
					</p:commandButton>
					<p:commandButton value="#{msgs.Cancelar}"
						onclick="PF('dlgCriarUsuario').hide()"
						oncomplete="PF('wzdUsuario').loadStep(PF('wzdUsuario').cfg.steps[0], true);"
						actionListener="#{cadastroUsuarioMB.novoUsuarioNaEmpresaSelecionada}" />
				</p:panelGrid>
				<p:spacer height="10px" width="100%" />
			</p:panel>
		</p:tab>

	</p:wizard>
</ui:composition>
</html>