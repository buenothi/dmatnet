<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions"
	xmlns:dmat="http://java.sun.com/jsf/composite/composites">

<ui:composition>
	<p:wizard id="wzdUsuario" widgetVar="wzdUsuario"
		backLabel="#{msgs.Voltar}" nextLabel="#{msgs.Avancar}"
		onnext="PF('dlgCriarUsuario').initPosition()"
		onback="PF('dlgCriarUsuario').initPosition()">

		<p:tab title="#{msgs.DadosUsuario}">
			<dmat:usuariosDadosComposite id="udcUsuarioNovo"
				cadastroUsuarioNome="#{cadastroUsuarioMB.usuarioNovo.nome}"
				cadastroUsuarioSexo="#{cadastroUsuarioMB.usuarioNovo.genero}"
				dataCadastro="#{cadastroUsuarioMB.usuarioNovo.dataCadastroPessoa}"
				dataCadastroRequired="true" nomePessoaRequired="true" />
		</p:tab>

		<p:tab title="#{msgs.DocumentosPessoaFisica}">
			<dmat:usuariosDocumentosComposite id="udocUsuarioNovo"
				documentosPessoais="#{cadastroUsuarioMB.documentosPessoaisUsuario}"
				rgRequired="true" rgOrgExpRequired="true" rgDataExpRequired="true"
				cpfRequired="true" />
		</p:tab>

		<p:tab title="#{msgs.Endereco}">
			<p:panel header="#{msgs.Endereco}" closable="false">
				<p:messages id="msEndereco" showDetail="true" closable="true" />
				<dmat:enderecoComposite id="dmatEnderecoContato"
					enderecoRendered="true" barraBotoesRendered="false"
					renderedHistorico="false"
					enderecoAtual="#{cadastroUsuarioMB.enderecoUsuarioAtual}"
					enderecoHistorico="#{cadastroUsuarioMB.enderecosUsuarioHistorico}"
					ajaxComponentRender="@this, formModulos:formCadEmpresa:tbwCadastroEmpresa:dmatEnderecoContato:acpEndereco:listCidade"
					disabledEditar="#{cadastroUsuarioMB.btnEnderecoUsuarioEditarDesativado}"
					actionListenerEditar="#{cadastroUsuarioMB.editarEnderecoUsuario}"
					enderecoEditarRender="true"
					updateEditar="formModulos:formCadEmpresa:tbwCadastroEmpresa:wzdUsuario"
					disabledCancelar="false"
					actionListenerCancelar="#{cadastroUsuarioMB.cancelarEnderecoUsuario}"
					updateCancelar="formModulos:formCadEmpresa:tbwCadastroEmpresa:wzdUsuario"
					disabledSalvar="#{cadastroUsuarioMB.btnEnderecoUsuarioSalvarDesativado}"
					actionListenerSalvar="#{cadastroUsuarioMB.salvarEnderecoUsuario}"
					updateSalvar="formModulos:formCadEmpresa:tbwCadastroEmpresa:wzdUsuario"
					disabledNovo="#{cadastroUsuarioMB.btnEnderecoUsuarioNovoDesativado}"
					actionListenerNovo="#{cadastroUsuarioMB.novoEnderecoUsuario}"
					updateNovo="formModulos:formCadEmpresa:tbwCadastroEmpresa:wzdUsuario"
					disabledExcluir="#{cadastroUsuarioMB.btnEnderecoUsuarioExcluirDesativado}"
					actionListenerExcluir="#{cadastroUsuarioMB.excluirEnderecoUsuario}"
					updateExcluir="formModulos:formCadEmpresa:tbwCadastroEmpresa:wzdUsuario"
					renderedBtnExcluir="#{cadastroEmpresaMB.btnEnderecoEmpresaExcluirRender}"
					messageConfirmaExcluir="#{msgs.DeletarEnderecoUsuario}"
					messageHeaderExcluir="#{msgs.Confirmar}"
					messageLabelExcluir="#{msgs.Excluir}">
				</dmat:enderecoComposite>
			</p:panel>
		</p:tab>

		<p:tab title="#{msgs.ContatoUsuario}">
			<p:panel header="#{msgs.ContatoUsuario}" closable="false">
				<p:messages id="msEmail" showDetail="true" closable="true" />
				<p:tabView>
					<p:tab title="#{msgs.Email}">
						<p:panel header="#{msgs.Email}" closable="false">
							<p:panelGrid columns="2" styleClass="tabelaSemBorda">
								<p:outputLabel value="#{msgs.Email}*" />
								<p:inputText id="iptEmailUsuario" size="22"
									value="#{cadastroUsuarioMB.emailUsuario.nomeEmail}"
									required="true"
									requiredMessage="#{msgs.MensagemEmailUsuarioRequerido}" />

								<p:outputLabel value="#{msgs.EmailTipo}" />
								<p:selectOneMenu style="width:100%"
									value="#{cadastroUsuarioMB.emailUsuario.tipoEmail}"
									effect="fade" converter="emailTipoConverter">
									<f:selectItems value="#{emailTipoMB.emailsTipos}"
										var="emailTipo" itemLabel="#{emailTipo.tipo}"
										itemValue="#{emailTipo}" />
								</p:selectOneMenu>

								<p:outputLabel value="#{msgs.EmailPrincipal}" />
								<p:selectBooleanButton
									value="#{cadastroUsuarioMB.emailUsuario.emailPrincipal}"
									onLabel="#{msgs.Sim}" offLabel="#{msgs.Nao}"
									onIcon="ui-icon-check" offIcon="ui-icon-close" />

								<p:spacer width="100%" height="5px" />
								<p:toolbar>
									<f:facet name="left">
										<p:commandButton value="#{msgs.Adicionar}"
											actionListener="#{cadastroUsuarioMB.adicionarEmailContato}"
											update="formModulos:formCadEmpresa:tbwCadastroEmpresa:wzdUsuario" />
										<p:commandButton value="#{msgs.Cancelar}"
											update="formModulos:formCadEmpresa:tbwCadastroEmpresa:wzdUsuario" />
									</f:facet>
								</p:toolbar>

							</p:panelGrid>

							<p:spacer width="100%" height="2px" />

							<p:dataTable paginator="true" rows="2" scrollable="true"
								styleClass="dataTable" emptyMessage="#{msgs.ListaEmailVazio}"
								value="#{cadastroUsuarioMB.emailsUsuario}"
								paginatorAlwaysVisible="false" var="email"
								sortBy="#{email.idEmail}" sortOrder="descending" editable="true"
								rowKey="#{email.idEmail}">

								<p:column headerText="#{msgs.Email}">
									<p:cellEditor>
										<f:facet name="output">
											<p:outputLabel value="#{email.nomeEmail}" />
										</f:facet>
										<f:facet name="input">
											<p:inputText value="#{email.nomeEmail}" />
										</f:facet>
									</p:cellEditor>
								</p:column>
								<p:column headerText="#{msgs.EmailTipo}">
									<p:cellEditor>
										<f:facet name="output">
											<p:outputLabel value="#{email.tipoEmail.tipo}" />
										</f:facet>
										<f:facet name="input">
											<p:selectOneMenu style="width:100%"
												value="#{email.tipoEmail}" converter="emailTipoConverter"
												immediate="true">
												<f:selectItems value="#{emailTipoMB.emailsTipos}"
													var="emailTipo" itemLabel="#{emailTipo.tipo}"
													itemValue="#{emailTipo}" />
											</p:selectOneMenu>
										</f:facet>
									</p:cellEditor>
								</p:column>
								<p:column headerText="#{msgs.EmailPrincipalTab}">
									<p:cellEditor>
										<f:facet name="output">
											<p:outputLabel value="#{email.emailPrincipal}" />
										</f:facet>
										<f:facet name="input">
											<p:selectBooleanButton value="#{email.emailPrincipal}"
												onLabel="#{msgs.Sim}" offLabel="#{msgs.Nao}"
												onIcon="ui-icon-check" offIcon="ui-icon-close" />
										</f:facet>
									</p:cellEditor>
								</p:column>

								<p:column style="width:55px">
									<p:rowEditor />
								</p:column>

								<p:column style="width:55px">
									<p:commandButton icon="fa fa-trash" />
								</p:column>

							</p:dataTable>
						</p:panel>
					</p:tab>

					<p:tab title="#{msgs.Telefone}">
						<p:panel header="#{msgs.Telefone}" closable="false">
							<p:panelGrid columns="2" styleClass="tabelaSemBorda">
								<p:outputLabel value="#{msgs.Telefone}*" />
								<p:inputMask id="ipmTel" mask="+ 99 (99) 9999-9999" size="22"
									value="#{cadastroUsuarioMB.telefoneUsuario.numeroTelefone}" />
								<p:outputLabel value="#{msgs.TelefoneTipo}" />
								<p:selectOneMenu style="width:100%"
									value="#{cadastroUsuarioMB.telefoneUsuario.tipoTelefone}"
									effect="fade" converter="telefoneTipoConverter">
									<f:selectItems value="#{telefoneTipoMB.telefonesTipos}"
										var="telefoneTipo" itemLabel="#{telefoneTipo.tipo}"
										itemValue="#{telefoneTipo}" />
								</p:selectOneMenu>

								<p:spacer width="100%" height="5px" />

								<p:toolbar>
									<f:facet name="left">
										<p:commandButton value="#{msgs.Adicionar}"
											actionListener="#{cadastroUsuarioMB.adicionarTelefoneContato}"
											update="formModulos:formCadEmpresa:tbwCadastroEmpresa:wzdUsuario" />
										<p:commandButton value="#{msgs.Cancelar}"
											update="formModulos:formCadEmpresa:tbwCadastroEmpresa:wzdUsuario" />
									</f:facet>
								</p:toolbar>
							</p:panelGrid>

							<p:spacer width="100%" height="2px" />

							<p:dataTable paginator="true" rows="2" scrollable="true"
								styleClass="dataTable" emptyMessage="#{msgs.ListaContatoVazio}"
								value="#{cadastroUsuarioMB.telefonesUsuario}"
								paginatorAlwaysVisible="false" var="telefone"
								sortBy="#{telefone.idTelefone}" sortOrder="descending"
								editable="true" rowKey="#{telefone.idTelefone}">

								<p:column headerText="#{msgs.Telefone}">
									<p:cellEditor>
										<f:facet name="output">
											<p:outputLabel value="#{telefone.numeroTelefone}" />
										</f:facet>
										<f:facet name="input">
											<p:inputMask mask="+ 99 (99) 9999-9999"
												value="#{telefone.numeroTelefone}" style="width: 100%">
											</p:inputMask>
										</f:facet>
									</p:cellEditor>
								</p:column>
								<p:column headerText="#{msgs.TelefoneTipo}">
									<p:cellEditor>
										<f:facet name="output">
											<p:outputLabel value="#{telefone.tipoTelefone.tipo}" />
										</f:facet>
										<f:facet name="input">
											<p:selectOneMenu style="width:100%"
												value="#{telefone.tipoTelefone}"
												converter="telefoneTipoConverter" immediate="true">
												<f:selectItems value="#{telefoneTipoMB.telefonesTipos}"
													var="telefoneTipo" itemLabel="#{telefoneTipo.tipo}"
													itemValue="#{telefoneTipo}" />
											</p:selectOneMenu>
										</f:facet>
									</p:cellEditor>
								</p:column>

								<p:column style="width:55px">
									<p:rowEditor />
								</p:column>

								<p:column style="width:55px">
									<p:commandButton icon="fa fa-trash"
										actionListener="#{cadastroUsuarioMB.removerTelefoneContatoDaLista(telefone)}"
										update="formModulos:formCadEmpresa:tbwCadastroEmpresa:wzdUsuario">
										<f:setPropertyActionListener value="#{telefone}"
											target="#{cadastroUsuarioMB.telefoneUsuarioExcluir}" />
										<p:confirm header="#{msgs.Confirmar}" message=""
											icon="ui-icon-alert" />
									</p:commandButton>
								</p:column>

							</p:dataTable>
						</p:panel>
					</p:tab>
				</p:tabView>
			</p:panel>
		</p:tab>

		<p:tab title="#{msgs.Login}">
			<p:panel header="#{msgs.Login}" closable="false">
				<p:messages id="msLogin" showDetail="true" closable="true" />
				<p:tabView>
					<p:tab title="#{msgs.Login}">
						<p:panelGrid columns="2" styleClass="tabelaSemBorda">
							<p:outputLabel value="#{msgs.Login}" />
							<p:inputText id="iptLogin" size="22"
								value="#{cadastroUsuarioMB.usuarioNovo.login}" required="true"
								requiredMessage="#{msgs.MensagemLoginRequerido}" />
							<p:outputLabel value="#{msgs.Senha}" />
							<p:commandButton id="btnGerarSenhaProvisoria"
								value="#{msgs.BotaoGerarSenha}" />
						</p:panelGrid>
					</p:tab>
					<p:tab title="#{msgs.PermissoesUsuario}">
					</p:tab>
				</p:tabView>
			</p:panel>
		</p:tab>

		<p:tab title="#{msgs.Empresas}">
			<p:panel header="#{msgs.Empresas}" closable="false">
				<p:panelGrid columns="1" styleClass="tabelaSemBorda">
					<h:outputText
						value="#{msgs.textoSelecionarMultiplasEmpresasUsuario}" />
					<h:panelGroup style="width:100%">
						<p:pickList id="pclEmpresasUsuario" immediate="true"
							style="margin:0 auto"
							value="#{cadastroUsuarioMB.empresasUsuario}" var="empresa"
							itemLabel="#{empresa.nome}" itemValue="#{empresa}"
							converter="empresaConverter" showSourceFilter="true"
							showTargetFilter="true" filterMatchMode="contains">
							<f:facet name="sourceCaption">
								<h:outputText value="#{msgs.EmpresaDisponivel}"
									converter="stringConverter" />
							</f:facet>
							<f:facet name="targetCaption">
								<h:outputText value="#{msgs.EmpresaAtribuida}"
									converter="stringConverter" />
							</f:facet>
						</p:pickList>
					</h:panelGroup>
				</p:panelGrid>
			</p:panel>
		</p:tab>

		<p:tab title="#{msgs.Salvar}">
			<p:panel header="#{msgs.Salvar}" closable="false">
				<p:spacer height="20px" width="100%" />
				<p:outputLabel value="#{msgs.UltimaEtapaCadastroUsuario}" />
				<p:spacer height="10px" width="100%" />
				<p:panelGrid columns="2" styleClass="tabelaSemBorda">
					<p:commandButton value="#{msgs.Salvar}"
						onclick="PF('dlgCriarUsuario').hide()"
						actionListener="#{cadastroUsuarioMB.salvarUsuario}"
						update="formModulos:formCadEmpresa:tbwCadastroEmpresa:pngCadastroUsuarioEmpresa, growlPrincipal"
						oncomplete="PF('wzdUsuario').loadStep(PF('wzdUsuario').cfg.steps[0], true);">
						<p:ajax
							update="formModulos:formCadEmpresa:tbwCadastroEmpresa:wzdUsuario"
							resetValues="true" />
					</p:commandButton>
					<p:commandButton value="#{msgs.Cancelar}"
						onclick="PF('dlgCriarUsuario').hide()"
						oncomplete="PF('wzdUsuario').loadStep(PF('wzdUsuario').cfg.steps[0], true);"
						actionListener="#{cadastroUsuarioMB.novoUsuarioNaEmpresaSelecionada}" />
				</p:panelGrid>
				<p:spacer height="10px" width="100%" />
			</p:panel>
		</p:tab>

	</p:wizard>
</ui:composition>
</html>