<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions"
	xmlns:dmat="http://java.sun.com/jsf/composite/composites">

<ui:composition>

	<dmat:barraBotoesComposite id="barraBotoesUsuario"
		disabledEditar="#{cadastroUsuarioMB.btnUsuarioEditarDesativado}"
		actionListenerEditar="#{cadastroUsuarioMB.editarUsuario}"
		updateEditar="formModulos:formCadEmpresa:tbwCadastroEmpresa:tbwCadastroUsuario:udcUsuarioSelecionado:pnlDadosUsuario"
		disabledCancelar="#{cadastroUsuarioMB.btnUsuarioCancelarDesativado}"
		actionListenerCancelar="#{cadastroUsuarioMB.cancelarUsuario}"
		updateCancelar="formModulos:formCadEmpresa:tbwCadastroEmpresa:tbwCadastroUsuario:udcUsuarioSelecionado:pnlDadosUsuario"
		resetCancelar="formModulos:formCadEmpresa:tbwCadastroEmpresa:tbwCadastroUsuario:udcUsuarioSelecionado:pnlDadosUsuario"
		disabledSalvar="#{cadastroUsuarioMB.btnUsuarioSalvarDesativado}"
		actionListenerSalvar="#{cadastroUsuarioMB.salvarUsuario}"
		updateSalvar="formModulos:formCadEmpresa:tbwCadastroEmpresa:tbwCadastroUsuario:udcUsuarioSelecionado:pnlDadosUsuario"
		renderedBtnNovo="true" labelNovo="#{msgs.NovoUsuario}"
		disabledNovo="#{cadastroUsuarioMB.btnUsuarioNovoDesativado}"
		actionListenerNovo="#{cadastroUsuarioMB.novoUsuarioNaEmpresaSelecionada}"
		onCompleteNovo="PF('dlgCriarUsuario').show()"
		updateNovo="formModulos:formCadEmpresa:tbwCadastroEmpresa:pngCadastroUsuarioEmpresa"
		renderSpacer="true"
		disabledImprimir="#{cadastroUsuarioMB.btnUsuarioEditarDesativado}"
		actionListenerImprimir="#{cadastroUsuarioMB.imprimirUsuario}"
		labelImprimir="#{msgs.Imprimir}"
		updateImprimir="formModulos:formCadEmpresa:tbwCadastroEmpresa:tbwCadastroUsuario:udcUsuarioSelecionado:pnlDadosUsuario"
		renderedBtnImprimir="true"
		disabledExcluir="#{cadastroUsuarioMB.btnUsuarioExcluirDesativado}"
		actionListenerExcluir="#{cadastroUsuarioMB.excluirUsuario}"
		updateExcluir="formModulos:formCadEmpresa:tbwCadastroEmpresa:pngCadastroUsuarioEmpresa"
		renderedBtnExcluir="#{cadastroUsuarioMB.btnUsuarioExcluirRender}"
		labelExcluir="#{msgs.Excluir}" headerConfirma="#{msgs.Confirmar}"
		messageConfirma="#{msgs.DeletarUsuario}" />

	<p:panelGrid columns="2" style="display:block"
		styleClass="top-aligned-columns">
		<h:panelGroup layout="block" style="width: 289px">
			<h:panelGrid columns="2">
				<p:inputText style="width: 252px" />
				<p:commandButton icon="fa fa-search"
					style="font-size:10pt;height:31px" />
			</h:panelGrid>
			<p:dataTable scrollable="true" paginator="true" rows="8"
				paginatorAlwaysVisible="false"
				emptyMessage="#{msgs.ListaUsuariosVazia}" var="usuario"
				value="#{cadastroEmpresaMB.usuariosEmpresaSelecionada}"
				rowKey="#{usuario.idPessoa}" selectionMode="single">

				<p:ajax event="rowSelect"
					listener="#{cadastroUsuarioMB.onSelectionUsuario}"
					update="formModulos:formCadEmpresa:tbwCadastroEmpresa:tbwCadastroUsuario:udcUsuarioSelecionado:pngUsuarioCadastroEditar,
						 formModulos:formCadEmpresa:tbwCadastroEmpresa:tbwCadastroUsuario:udocUsuarioSelecionado:tabDocumentos:pgdRG,
						 formModulos:formCadEmpresa:tbwCadastroEmpresa:tbwCadastroUsuario:udocUsuarioSelecionado:tabDocumentos:pgdCPF" />

				<p:column headerText="#{msgs.Login}">
					<h:outputText value="#{usuario.nome}" converter="stringConverter" />
				</p:column>
			</p:dataTable>
		</h:panelGroup>

		<h:panelGroup>
			<p:tabView id="tbwCadastroUsuario">

				<p:tab title="#{msgs.DadosUsuario}">
					<dmat:usuariosDadosComposite id="udcUsuarioSelecionado"
						cadastroUsuarioNome="#{cadastroUsuarioMB.usuarioSelecionado.nome}"
						cadastroUsuarioSexo="#{cadastroUsuarioMB.usuarioSelecionado.genero}"
						dataCadastro="#{cadastroUsuarioMB.usuarioSelecionado.dataCadastroPessoa}" />
				</p:tab>

				<p:tab title="#{msgs.DocumentosPessoaFisica}">
					<dmat:usuariosDocumentosComposite id="udocUsuarioSelecionado"
						numRG="#{cadastroUsuarioMB.usuarioSelecionado.documentosPessoais.numRG}"
						rgOrgExpedidor="#{cadastroUsuarioMB.usuarioSelecionado.documentosPessoais.rgOrgExpedidor}"
						rgDataExpedicao="#{cadastroUsuarioMB.usuarioSelecionado.documentosPessoais.rgDataExpedicao}"
						numCPF="#{cadastroUsuarioMB.usuarioSelecionado.documentosPessoais.numCPF}"
						numRic="#{cadastroUsuarioMB.usuarioSelecionado.documentosPessoais.numRic}"
						ricOrgExpedidor="#{cadastroUsuarioMB.usuarioSelecionado.documentosPessoais.ricOrgExpedidor}"
						ricDataExpedicao="#{cadastroUsuarioMB.usuarioSelecionado.documentosPessoais.ricDataExpedicao}"
						numRNE="#{cadastroUsuarioMB.usuarioSelecionado.documentosPessoais.numRNE}"
						rneOrgExpedidor="#{cadastroUsuarioMB.usuarioSelecionado.documentosPessoais.rneOrgExpedidor}"
						rneDataExpedicao="#{cadastroUsuarioMB.usuarioSelecionado.documentosPessoais.rneDataExpedicao}"
						numCNH="#{cadastroUsuarioMB.usuarioSelecionado.documentosPessoais.numCNH}"
						cnhUf="#{cadastroUsuarioMB.usuarioSelecionado.documentosPessoais.cnhUf}"
						cnhDataExpedicao="#{cadastroUsuarioMB.usuarioSelecionado.documentosPessoais.cnhDataExpedicao}"
						cnhValidade="#{cadastroUsuarioMB.usuarioSelecionado.documentosPessoais.cnhValidade}"
						cnhPrimeiraEmissao="#{cadastroUsuarioMB.usuarioSelecionado.documentosPessoais.cnhPrimeiraEmissao}"
						cnhCategoria="#{cadastroUsuarioMB.usuarioSelecionado.documentosPessoais.cnhCategoria}" />
				</p:tab>

				<p:tab title="#{msgs.Endereco}">

				</p:tab>

				<p:tab title="#{msgs.Contatos}">

				</p:tab>

				<p:tab title="#{msgs.Login}">
				</p:tab>

				<p:tab title="#{msgs.Empresas}"></p:tab>

			</p:tabView>
		</h:panelGroup>
	</p:panelGrid>

	<p:dialog widgetVar="dlgCriarUsuario" resizable="false" modal="true"
		width="1000" header="#{msgs.NovoUsuario}" style="padding:10px"
		showEffect="fade" hideEffect="fade" responsive="true"
		position="center"
		onHide="PF('wzdUsuario').loadStep(PF('wzdUsuario').cfg.steps[0], true);"
		onShow="PF('dlgCriarUsuario').initPosition()"
		rendered="#{cadastroUsuarioMB.dialogNovoUsuarioRendered}">
		<ui:include
			src="/aplicacaoWeb/cadastroUsuario/cadastroNovoUsuario.xhtml" />
		<p:ajax event="close" update="formModulos"
			listener="#{cadastroUsuarioMB.fecharDialogNovoUsuario}" />
	</p:dialog>
</ui:composition>
</html>