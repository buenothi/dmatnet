<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions"
	xmlns:dmat="http://java.sun.com/jsf/composite/composites">

<ui:composition>

	<dmat:barraBotoesComposite id="barraBotoesUsuario"
		disabledEditar="#{cadastroUsuarioMB.btnUsuarioEditarDesativado}"
		actionListenerEditar="#{cadastroUsuarioMB.editarUsuario}"
		updateEditar="formModulos, formModulos:formCadEmpresa:tbwCadastroEmpresa:barraBotoesUsuario:tbrBotoes,
						 formModulos:formCadEmpresa:tbwCadastroEmpresa:tbwCadastroUsuario:udcDadosUsuarioSelecionado:pnlDadosUsuario,
						 formModulos:formCadEmpresa:tbwCadastroEmpresa:tbwCadastroUsuario:udocDocumentosUsuarioSelecionado:tabDocumentos:pngUsuarioDocumentosRG,
						 formModulos:formCadEmpresa:tbwCadastroEmpresa:tbwCadastroUsuario:udocDocumentosUsuarioSelecionado:tabDocumentos:pngUsuarioDocumentosCPF,
						 formModulos:formCadEmpresa:tbwCadastroEmpresa:tbwCadastroUsuario:udocDocumentosUsuarioSelecionado:tabDocumentos:pngUsuarioDocumentosRIC,
						 formModulos:formCadEmpresa:tbwCadastroEmpresa:tbwCadastroUsuario:udocDocumentosUsuarioSelecionado:tabDocumentos:pngUsuarioDocumentosRNE,
						 formModulos:formCadEmpresa:tbwCadastroEmpresa:tbwCadastroUsuario:udocDocumentosUsuarioSelecionado:tabDocumentos:pngUsuarioDocumentosCNH,
						 formModulos:formCadEmpresa:tbwCadastroEmpresa:tbwCadastroUsuario:uedUsuarioSelecionado:pnlEnderecoUsuario"
		disabledCancelar="#{cadastroUsuarioMB.btnUsuarioCancelarDesativado}"
		actionListenerCancelar="#{cadastroUsuarioMB.cancelarUsuario}"
		updateCancelar="formModulos, formModulos:formCadEmpresa:tbwCadastroEmpresa:barraBotoesUsuario:tbrBotoes,
						 formModulos:formCadEmpresa:tbwCadastroEmpresa:tbwCadastroUsuario:udcDadosUsuarioSelecionado:pnlDadosUsuario,
						 formModulos:formCadEmpresa:tbwCadastroEmpresa:tbwCadastroUsuario:udocDocumentosUsuarioSelecionado:tabDocumentos:pngUsuarioDocumentosRG,
						 formModulos:formCadEmpresa:tbwCadastroEmpresa:tbwCadastroUsuario:udocDocumentosUsuarioSelecionado:tabDocumentos:pngUsuarioDocumentosCPF,
						 formModulos:formCadEmpresa:tbwCadastroEmpresa:tbwCadastroUsuario:udocDocumentosUsuarioSelecionado:tabDocumentos:pngUsuarioDocumentosRIC,
						 formModulos:formCadEmpresa:tbwCadastroEmpresa:tbwCadastroUsuario:udocDocumentosUsuarioSelecionado:tabDocumentos:pngUsuarioDocumentosRNE,
						 formModulos:formCadEmpresa:tbwCadastroEmpresa:tbwCadastroUsuario:udocDocumentosUsuarioSelecionado:tabDocumentos:pngUsuarioDocumentosCNH,
						 formModulos:formCadEmpresa:tbwCadastroEmpresa:tbwCadastroUsuario:uedUsuarioSelecionado:pnlEnderecoUsuario"
		resetCancelar="formModulos:formCadEmpresa:tbwCadastroEmpresa:tbwCadastroUsuario:udcDadosUsuarioSelecionado:pnlDadosUsuario"
		disabledSalvar="#{cadastroUsuarioMB.btnUsuarioSalvarDesativado}"
		actionListenerSalvar="#{cadastroUsuarioMB.salvarUsuario}"
		updateSalvar="formModulos:formCadEmpresa:tbwCadastroEmpresa:tbwCadastroUsuario:udcDadosUsuarioSelecionado:pnlDadosUsuario"
		renderedBtnNovo="true" labelNovo="#{msgs.NovoUsuario}"
		disabledNovo="#{cadastroUsuarioMB.btnUsuarioNovoDesativado}"
		actionListenerNovo="#{cadastroUsuarioMB.novoUsuarioNaEmpresaSelecionada}"
		onCompleteNovo="PF('dlgCriarUsuario').show()"
		updateNovo="formModulos:formCadEmpresa:tbwCadastroEmpresa:pngCadastroUsuarioEmpresa"
		renderSpacer="true"
		disabledImprimir="#{cadastroUsuarioMB.btnUsuarioEditarDesativado}"
		actionListenerImprimir="#{cadastroUsuarioMB.imprimirUsuario}"
		labelImprimir="#{msgs.Imprimir}"
		updateImprimir="formModulos:formCadEmpresa:tbwCadastroEmpresa:tbwCadastroUsuario:udcDadosUsuarioSelecionado:pnlDadosUsuario"
		renderedBtnImprimir="true"
		disabledExcluir="#{cadastroUsuarioMB.btnUsuarioExcluirDesativado}"
		actionListenerExcluir="#{cadastroUsuarioMB.excluirUsuario}"
		updateExcluir="formModulos:formCadEmpresa:tbwCadastroEmpresa:pngCadastroUsuarioEmpresa"
		renderedBtnExcluir="#{cadastroUsuarioMB.btnUsuarioExcluirRender}"
		labelExcluir="#{msgs.Excluir}" headerConfirma="#{msgs.Confirmar}"
		messageConfirma="#{msgs.DeletarUsuario}" />

	<p:panelGrid columns="2" style="display:block"
		styleClass="top-aligned-columns">
		<h:panelGroup layout="block" style="width: 250px">
			<h:panelGrid columns="2">
				<p:inputText style="width: 213px" />
				<p:commandButton icon="fa fa-search"
					style="font-size:10pt;height:31px" />
			</h:panelGrid>
			<p:dataTable scrollable="true" paginator="true" rows="8"
				paginatorAlwaysVisible="false"
				emptyMessage="#{msgs.ListaUsuariosVazia}" var="usuario"
				value="#{cadastroEmpresaMB.usuariosEmpresaSelecionada}"
				rowKey="#{usuario.idPessoa}" selectionMode="single">

				<p:ajax event="rowSelect"
					listener="#{cadastroUsuarioMB.onSelectionUsuario}"
					update="formModulos:formCadEmpresa:tbwCadastroEmpresa:barraBotoesUsuario:tbrBotoes,
						 formModulos:formCadEmpresa:tbwCadastroEmpresa:tbwCadastroUsuario:udcDadosUsuarioSelecionado:pnlDadosUsuario,
						 formModulos:formCadEmpresa:tbwCadastroEmpresa:tbwCadastroUsuario:udocDocumentosUsuarioSelecionado:tabDocumentos:pngUsuarioDocumentosRG,
						 formModulos:formCadEmpresa:tbwCadastroEmpresa:tbwCadastroUsuario:udocDocumentosUsuarioSelecionado:tabDocumentos:pngUsuarioDocumentosCPF,
						 formModulos:formCadEmpresa:tbwCadastroEmpresa:tbwCadastroUsuario:udocDocumentosUsuarioSelecionado:tabDocumentos:pngUsuarioDocumentosRIC,
						 formModulos:formCadEmpresa:tbwCadastroEmpresa:tbwCadastroUsuario:udocDocumentosUsuarioSelecionado:tabDocumentos:pngUsuarioDocumentosRNE,
						 formModulos:formCadEmpresa:tbwCadastroEmpresa:tbwCadastroUsuario:udocDocumentosUsuarioSelecionado:tabDocumentos:pngUsuarioDocumentosCNH,
						 formModulos:formCadEmpresa:tbwCadastroEmpresa:tbwCadastroUsuario:uedUsuarioSelecionado:pnlEnderecoUsuario" />
				<!-- formModulos:formCadEmpresa:tbwCadastroEmpresa:tbwCadastroUsuario:uccUsuarioSelecionado:tbwContatosUsuario:pngContatoEmail, 
						 formModulos:formCadEmpresa:tbwCadastroEmpresa:tbwCadastroUsuario:uccUsuarioSelecionado:tbwContatosUsuario:pngContatoTelefone" /> -->
				<p:column headerText="#{msgs.Login}">
					<h:outputText value="#{usuario.nome}" converter="stringConverter" />
				</p:column>
			</p:dataTable>
		</h:panelGroup>

		<h:panelGroup id="pngCadastroUsuario" layout="block">
			<p:tabView id="tbwCadastroUsuario">

				<p:tab title="#{msgs.DadosUsuario}">
					<dmat:usuariosDadosComposite id="udcDadosUsuarioSelecionado"
						cadastroUsuarioNome="#{cadastroUsuarioMB.usuarioSelecionado.nome}"
						cadastroUsuarioSexo="#{cadastroUsuarioMB.usuarioSelecionado.genero}"
						dataCadastro="#{cadastroUsuarioMB.usuarioSelecionado.dataCadastroPessoa}"
						editarRendered="#{cadastroUsuarioMB.dadosUsuariosEditar}"
						exibirRendered="#{cadastroUsuarioMB.dadosUsuariosExibir}"
						dadosUsuarioRendered="#{cadastroUsuarioMB.cadastroUsuarioDadosRendered}"
						mensagemSelecionarUsuarioRendered="#{cadastroUsuarioMB.mensagemSelecionarUsuarioRendered}" 
						mensagemHasUsuarioRendered="#{cadastroUsuarioMB.mensagemHasUsuario}"/>
				</p:tab>

				<p:tab title="#{msgs.DocumentosPessoaFisica}">
					<dmat:usuariosDocumentosComposite
						id="udocDocumentosUsuarioSelecionado"
						documentosPessoais="#{cadastroUsuarioMB.usuarioSelecionado.documentosPessoais}"
						editarRendered="#{cadastroUsuarioMB.dadosUsuariosEditar}"
						exibirRendered="#{cadastroUsuarioMB.dadosUsuariosExibir}"
						dadosUsuarioRendered="#{cadastroUsuarioMB.cadastroUsuarioDoctosRendered}"
						mensagemSelecionarUsuarioRendered="#{cadastroUsuarioMB.mensagemSelecionarUsuarioRendered}" 
						mensagemHasRGRendered="#{cadastroUsuarioMB.mensagemHasRGRendered}" 
						mensagemHasCPFRendered="#{cadastroUsuarioMB.mensagemHasCPFRendered}"
						mensagemHasRICRendered="#{cadastroUsuarioMB.mensagemHasRICRendered}"
						mensagemHasRNERendered="#{cadastroUsuarioMB.mensagemHasRNERendered}"
						mensagemHasCNHRendered="#{cadastroUsuarioMB.mensagemHasCNHRendered}"/>
				</p:tab>

				<p:tab title="#{msgs.Endereco}">
					<dmat:usuariosEnderecoComposite id="uedUsuarioSelecionado"
						enderecoRendered="true" barraBotoesRendered="false"
						renderedHistorico="true"
						enderecoAtual="#{cadastroUsuarioMB.enderecoUsuarioSelecionado}"
						enderecoHistorico="#{cadastroUsuarioMB.enderecosUsuarioHistorico}"
						ajaxComponentRender="@this, formModulos:formCadEmpresa:tbwCadastroEmpresa:tbwCadastroUsuario:uedUsuarioSelecionado:dmatEnderecoContato:acpEndereco:listCidade"
						disabledEditar="#{cadastroUsuarioMB.btnEnderecoUsuarioEditarDesativado}"
						actionListenerEditar="#{cadastroUsuarioMB.editarEnderecoUsuario}"
						enderecoEditarRender="#{cadastroUsuarioMB.dadosUsuariosEditar}"
						disabledCancelar="#{cadastroUsuarioMB.dadosUsuariosExibir}"
						updateEditar="formModulos:formCadEmpresa:tbwCadastroEmpresa:wzdUsuario"
						actionListenerCancelar="#{cadastroUsuarioMB.cancelarEnderecoUsuario}"
						updateCancelar="formModulos:formCadEmpresa:tbwCadastroEmpresa:wzdUsuario"
						disabledSalvar="#{cadastroUsuarioMB.btnEnderecoUsuarioSalvarDesativado}"
						actionListenerSalvar="#{cadastroUsuarioMB.salvarEnderecoUsuario}"
						updateSalvar="formModulos:formCadEmpresa:tbwCadastroEmpresa:wzdUsuario"
						disabledNovo="#{cadastroUsuarioMB.btnEnderecoUsuarioNovoDesativado}"
						actionListenerNovo="#{cadastroUsuarioMB.novoEnderecoUsuario}"
						updateNovo="formModulos:formCadEmpresa:tbwCadastroEmpresa:wzdUsuario"
						disabledExcluir="#{cadastroUsuarioMB.btnEnderecoUsuarioExcluirDesativado}"
						actionListenerExcluir="#{cadastroUsuarioMB.excluirEnderecoUsuario}"
						updateExcluir="formModulos:formCadEmpresa:tbwCadastroEmpresa:wzdUsuario"
						renderedBtnExcluir="#{cadastroEmpresaMB.btnEnderecoEmpresaExcluirRender}"
						messageConfirmaExcluir="#{msgs.DeletarEnderecoUsuario}"
						messageHeaderExcluir="#{msgs.Confirmar}"
						messageLabelExcluir="#{msgs.Excluir}"
						dadosUsuarioRendered="#{cadastroUsuarioMB.cadastroUsuarioEnderecoRendered}"
						mensagemSelecionarUsuarioRendered="#{cadastroUsuarioMB.mensagemSelecionarUsuarioRendered}"
						mensagemHasEnderecoRendered="#{cadastroUsuarioMB.mensagemHasEnderecoRendered}" />
				</p:tab>

				<p:tab title="#{msgs.Contatos}">

				</p:tab>

				<p:tab title="#{msgs.Login}">
				</p:tab>

				<p:tab title="#{msgs.Empresas}"></p:tab>

			</p:tabView>
		</h:panelGroup>
	</p:panelGrid>

	<p:dialog widgetVar="dlgCriarUsuario" resizable="false" modal="true"
		width="1000" header="#{msgs.NovoUsuario}" style="padding:10px"
		showEffect="fade" hideEffect="fade" responsive="true"
		position="center"
		onHide="PF('wzdUsuario').loadStep(PF('wzdUsuario').cfg.steps[0], true);"
		onShow="PF('dlgCriarUsuario').initPosition()"
		rendered="#{cadastroUsuarioMB.dialogNovoUsuarioRendered}">
		<ui:include
			src="/aplicacaoWeb/cadastroUsuario/cadastroNovoUsuario.xhtml" />
		<p:ajax event="close" update="formModulos"
			listener="#{cadastroUsuarioMB.fecharDialogNovoUsuario}" />
	</p:dialog>
</ui:composition>
</html>