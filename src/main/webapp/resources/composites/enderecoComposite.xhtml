<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:composite="http://java.sun.com/jsf/composite"
	xmlns:dmat="http://java.sun.com/jsf/composite/composites">

<composite:interface>
	<composite:attribute name="dataCadastro" />
	<composite:editableValueHolder name="logradouroDataInput"
		targets="form:logradouroData" />

	<composite:attribute name="logradouroTipo" />
	<composite:attribute name="logradouro" />

	<composite:attribute name="logradouroNome" />
	<composite:editableValueHolder name="logradouroNomeInput"
		targets="form:logradouroNome" />

	<composite:attribute name="logradouroNumero" />
	<composite:editableValueHolder name="logradouroNumeroInput"
		targets="form:logradouroNumero" />

	<composite:attribute name="logradouroComplemento" />
	<composite:editableValueHolder name="logradouroComplementoInput"
		targets="form:logradouroComplemento" />

	<composite:attribute name="bairro" />
	<composite:editableValueHolder name="bairroInput" targets="form:bairro" />

	<composite:attribute name="cep" />
	<composite:editableValueHolder name="cepInput" targets="form:cep" />

	<composite:attribute name="caixaPostal" />
	<composite:editableValueHolder name="caixaPostalInput"
		targets="form:caixaPostal" />

	<composite:attribute name="cidade" />
	<composite:editableValueHolder name="cidadeInput" targets="form:cidade" />

	<composite:attribute name="estado" />
	<composite:editableValueHolder name="estadoInput" targets="form:estado" />

	<composite:attribute name="ajaxComponentRender" />
	<composite:attribute name="ajaxComponentRenderHistorico" />

	<composite:attribute name="enderecoHistorico" />

	<composite:attribute name="disabledEditar" />
	<composite:attribute name="actionListenerEditar"
		method-signature="void actionListener(javax.faces.event.ActionEvent)" />
	<composite:attribute name="updateEditar" />
	<composite:attribute name="enderecoEditarRender" />

	<composite:attribute name="disabledCancelar" />
	<composite:attribute name="actionListenerCancelar"
		method-signature="void actionListener(javax.faces.event.ActionEvent)" />
	<composite:attribute name="updateCancelar" />

	<composite:attribute name="disabledSalvar" />
	<composite:attribute name="actionListenerSalvar"
		method-signature="void actionListener(javax.faces.event.ActionEvent)" />
	<composite:attribute name="updateSalvar" />

	<composite:attribute name="disabledNovo" />
	<composite:attribute name="actionListenerNovo"
		method-signature="void actionListener(javax.faces.event.ActionEvent)" />
	<composite:attribute name="updateNovo" />

	<composite:attribute name="disabledExcluir" />
	<composite:attribute name="actionListenerExcluir"
		method-signature="void actionListener(javax.faces.event.ActionEvent)" />
	<composite:attribute name="updateExcluir" />
	<composite:attribute name="renderedBtnExcluir" />
	<composite:attribute name="messageConfirmaExcluir" />
	<composite:attribute name="messageLabelExcluir" />
	<composite:attribute name="messageHeaderExcluir" />

</composite:interface>

<composite:implementation>
	<dmat:barraBotoesComposite id="barraCRUDEndereco"
		disabledEditar="#{cc.attrs.disabledEditar}"
		actionListenerEditar="#{cc.attrs.actionListenerEditar}"
		updateEditar="#{cc.attrs.updateEditar}"
		disabledCancelar="#{cc.attrs.disabledCancelar}"
		actionListenerCancelar="#{cc.attrs.actionListenerCancelar}"
		updateCancelar="#{cc.attrs.updateCancelar}"
		disabledSalvar="#{cc.attrs.disabledSalvar}"
		actionListenerSalvar="#{cc.attrs.actionListenerSalvar}"
		updateSalvar="#{cc.attrs.updateSalvar}"
		labelNovo="#{msgs.NovoEndereco}"
		disabledNovo="#{cc.attrs.disabledNovo}"
		actionListenerNovo="#{cc.attrs.actionListenerNovo}"
		updateNovo="#{cc.attrs.updateNovo}" renderedBtnNovo="true"
		renderSpacer="true" disabledExcluir="#{cc.attrs.disabledExcluir}"
		actionListenerExcluir="#{cc.attrs.actionListenerExcluir}"
		updateExcluir="#{cc.attrs.updateExcluir}"
		renderedBtnExcluir="#{cc.attrs.renderedBtnExcluir}"
		labelExcluir="#{cc.attrs.messageLabelExcluir}"
		headerConfirma="#{cc.attrs.messageHeaderExcluir}"
		messageConfirma="#{cc.attrs.messageConfirmaExcluir}" />

	<p:accordionPanel id="acpEndereco"
		rendered="#{cadastroEmpresaMB.enderecoRendered}">
		<p:tab id="tabEndereco" title="#{msgs.Endereco}">
			<h:panelGroup id="pngEnderecoEditar" layout="block"
				styleClass="formularioEnderecoEditar"
				rendered="#{cc.attrs.enderecoEditarRender}">
				<p:panelGrid id="tblEndereco" columns="2"
					styleClass="tabelaSemBorda">
					<p:outputLabel value="#{msgs.DataCadastro}:" />
					<p:calendar id="calDataInicio" locale="pt" showOn="button"
						showButtonPanel="true" pattern="dd/MM/yyyy" mask="true" size="8"
						value="#{cc.attrs.dataCadastro}" label="#{msgs.DataCadastro}">
						<p:message for="calDataInicio" />
					</p:calendar>
					<p:outputLabel value="#{msgs.Logradouro}:" />
					<h:panelGrid columns="2">
						<p:selectOneMenu id="listLogradouroTipo" style="width: 100px"
							effect="fade" value="#{cc.attrs.logradouro}"
							converter="logradouroConverter" filter="true"
							filterMatchMode="startsWith">
							<f:selectItem itemLabel="#{cc.attrs.logradouro.nomeLogradouro}"
								noSelectionOption="true" />
							<f:selectItems value="#{logradouroMB.logradouros}"
								var="logradouro" itemLabel="#{logradouro.nomeLogradouro}"
								itemValue="#{logradouro}" />
						</p:selectOneMenu>
						<p:inputText id="logradouroNome" maxlength="250"
							style="width: 290px" value="#{cc.attrs.logradouroNome}" />
					</h:panelGrid>

					<p:outputLabel value="#{msgs.Numero}:" />
					<h:panelGrid columns="4">
						<p:inputText id="logradouroNumero" maxlength="10"
							style="width: 100px" value="#{cc.attrs.logradouroNumero}" />
						<p:spacer height="14" />
						<p:outputLabel value="#{msgs.Complemento}:" />
						<p:inputText id="logradouroComplemento" maxlength="250"
							style="width: 180px" value="#{cc.attrs.logradouroComplemento}" />
					</h:panelGrid>

					<p:outputLabel value="#{msgs.Bairro}:" />
					<h:panelGrid>
						<p:inputText id="bairro" maxlength="250" style="width: 393px"
							value="#{cc.attrs.bairro}" />
					</h:panelGrid>

					<p:outputLabel value="#{msgs.CEP}:" />
					<h:panelGrid columns="4">
						<p:inputMask id="cep" mask="99999-999" maxlength="8" size="8"
							value="#{cc.attrs.cep}" />
						<p:spacer height="15" />
						<p:outputLabel value="#{msgs.CaixaPostal}:" />
						<p:inputText id="caixaPostal" maxlength="8" style="width: 200px"
							value="#{cc.attrs.caixaPostal}" />
					</h:panelGrid>

					<p:outputLabel value="#{msgs.Estado}/#{msgs.Cidade}:" />
					<h:panelGrid id="tblCidadeEstado" columns="2">
						<p:selectOneMenu id="listEstado" panelStyle="width:150px"
							effect="fade" style="width:60px" value="#{cc.attrs.estado}"
							converter="estadoConverter" immediate="true">
							<p:ajax event="change" listener="#{estadoMB.onSelectionEstado}"
								update="#{cc.attrs.ajaxComponentRender}" />
							<f:selectItem itemLabel="#{cc.attrs.estado.estadoSigla}"
								noSelectionOption="true" />
							<f:selectItems value="#{estadoMB.estados}" var="estado"
								itemLabel="#{estado.estadoSigla}" itemValue="#{estado}" />
						</p:selectOneMenu>
						<p:selectOneMenu id="listCidade" panelStyle="width:180px"
							effect="fade" style="width:333px" value="#{cc.attrs.cidade}"
							converter="cidadeConverter" immediate="true" filter="true"
							filterMatchMode="startsWith">
							<f:selectItem itemLabel="#{cc.attrs.cidade.cidadeNome}"
								noSelectionOption="true" />
							<f:selectItems value="#{estadoMB.cidadesPorEstado}" var="cidade"
								itemLabel="#{cidade.cidadeNome}" itemValue="#{cidade}" />
						</p:selectOneMenu>
					</h:panelGrid>
				</p:panelGrid>

			</h:panelGroup>

			<h:panelGroup id="pngEnderecoExibir" layout="block"
				styleClass="formularioEnderecoExibir"
				rendered="#{cc.attrs.disabledCancelar}">
				<p:panelGrid columns="2" styleClass="tabelaSemBorda">
					<p:outputLabel value="#{msgs.DataCadastro}:" />
					<p:outputLabel value="#{cc.attrs.dataCadastro}">
						<f:convertDateTime type="both" pattern="dd/MM/YYYY" />
					</p:outputLabel>
					<p:outputLabel value="#{msgs.Logradouro}:" />
					<h:panelGrid columns="3">
						<p:outputLabel id="logradouroTipoExibir"
							value="#{cc.attrs.logradouroTipo}" converter="stringConverter" />
						<p:spacer width="3" />
						<p:outputLabel id="logradouroNomeExibir"
							value="#{cc.attrs.logradouroNome}" converter="stringConverter" />
					</h:panelGrid>

					<p:outputLabel value="#{msgs.Numero}:" />
					<h:panelGrid columns="3">
						<p:outputLabel id="logradouroNumeroExibir"
							value="#{cc.attrs.logradouroNumero}" />
						<p:spacer height="14" />
						<p:outputLabel id="logradouroComplementoExibir"
							converter="stringConverter"
							value="#{msgs.Complemento}: #{cc.attrs.logradouroComplemento}" />
					</h:panelGrid>

					<p:outputLabel value="#{msgs.Bairro}:" />
					<h:panelGrid>
						<p:outputLabel id="bairroExibir" value="#{cc.attrs.bairro}"
							converter="stringConverter" />
					</h:panelGrid>

					<p:outputLabel value="#{msgs.CEP}:" />
					<h:panelGrid columns="4">
						<p:outputLabel id="cepExibir" value="#{cc.attrs.cep}" />
						<p:spacer height="15" />
						<p:outputLabel id="caixaPostalExibir" converter="stringConverter"
							value="#{msgs.CaixaPostal}: #{cc.attrs.caixaPostal}" />
					</h:panelGrid>

					<p:outputLabel value="#{msgs.Estado}/#{msgs.Cidade}:" />
					<h:panelGrid columns="2" cellspacing="13">
						<p:outputLabel id="estadoExibir" value="#{cc.attrs.estado}" />
						<p:outputLabel id="cidadeExibir" value="#{cc.attrs.cidade}" />
					</h:panelGrid>
				</p:panelGrid>

			</h:panelGroup>
		</p:tab>

		<p:tab id="tabEnderecoHistorico" title="#{msgs.Historico}">
			<p:dataTable scrollable="true" styleClass="dataTable"
				paginator="true" rows="10"
				emptyMessage="#{msgs.ListaHistoricoEndereco}"
				value="#{cc.attrs.enderecoHistorico}" paginatorAlwaysVisible="false"
				var="endereco" sortBy="endereco.idEndereco" sortOrder="descending"
				editable="true" rowKey="endereco.idEndereco">
				<f:facet name="header">#{msgs.Historico}</f:facet>

				<p:column headerText="#{msgs.DataCadastro}" width="110">
					<p:cellEditor>
						<f:facet name="output">
							<p:outputLabel value="#{endereco.dataInicioEndereco}"
								style="font-size: 9pt;">
								<f:convertDateTime pattern="dd/MM/yyyy" />
							</p:outputLabel>
						</f:facet>
						<f:facet name="input">
							<p:calendar value="#{endereco.dataInicioEndereco}" locale="pt"
								showOn="button" showButtonPanel="true" pattern="dd/MM/yyyy"
								mask="true" size="8" />
						</f:facet>
					</p:cellEditor>
				</p:column>
				<p:column headerText="#{msgs.DataTermino}" width="110">
					<p:cellEditor>
						<f:facet name="output">
							<p:outputLabel value="#{endereco.dataTerminoEndereco}"
								style="font-size: 9pt;">
								<f:convertDateTime pattern="dd/MM/yyyy" />
							</p:outputLabel>
						</f:facet>
						<f:facet name="input">
							<p:calendar value="#{endereco.dataTerminoEndereco}" locale="pt"
								showOn="button" showButtonPanel="true" pattern="dd/MM/yyyy"
								mask="true" size="8" />
						</f:facet>
					</p:cellEditor>
				</p:column>
				<p:column headerText="#{msgs.Logradouro}" width="180">
					<p:cellEditor>
						<f:facet name="output">
							<p:outputLabel value="#{endereco.logradouro.nomeLogradouro}"
								style="font-size: 9pt;" converter="stringConverter">
							</p:outputLabel>
						</f:facet>
						<f:facet name="input">
							<p:inputText value="#{endereco.logradouro.nomeLogradouro}"
								style="font-size: 9pt; width: 100%" />
						</f:facet>
					</p:cellEditor>
				</p:column>
				<p:column headerText="#{msgs.Endereco}" width="300">
					<p:cellEditor>
						<f:facet name="output">
							<p:outputLabel value="#{endereco.logradouroNome}"
								style="font-size: 9pt;" converter="stringConverter">
							</p:outputLabel>
						</f:facet>
						<f:facet name="input">
							<p:inputText value="#{endereco.logradouroNome}"
								style="font-size: 9pt; width: 100%" />
						</f:facet>
					</p:cellEditor>
				</p:column>
				<p:column headerText="#{msgs.Numero}" width="60">
					<p:cellEditor>
						<f:facet name="output">
							<p:outputLabel value="#{endereco.logradouroNumero}"
								style="font-size: 9pt;">
							</p:outputLabel>
						</f:facet>
						<f:facet name="input">
							<p:inputText value="#{endereco.logradouroNumero}"
								style="font-size: 9pt; width: 100%" />
						</f:facet>
					</p:cellEditor>
				</p:column>
				<p:column headerText="#{msgs.Complemento}" width="110">
					<p:cellEditor>
						<f:facet name="output">
							<p:outputLabel value="#{endereco.logradouroComplemento}"
								style="font-size: 9pt;" converter="stringConverter">
							</p:outputLabel>
						</f:facet>
						<f:facet name="input">
							<p:inputText value="#{endereco.logradouroComplemento}"
								style="font-size: 9pt; width: 100%" />
						</f:facet>
					</p:cellEditor>
				</p:column>
				<p:column headerText="#{msgs.Bairro}" width="180">
					<p:cellEditor>
						<f:facet name="output">
							<p:outputLabel value="#{endereco.bairro}" style="font-size: 9pt;"
								converter="stringConverter">
							</p:outputLabel>
						</f:facet>
						<f:facet name="input">
							<p:inputText value="#{endereco.bairro}"
								style="font-size: 9pt; width: 100%" />
						</f:facet>
					</p:cellEditor>
				</p:column>
				<p:column headerText="#{msgs.CEP}" width="110">
					<p:cellEditor>
						<f:facet name="output">
							<p:outputLabel value="#{endereco.cep}" style="font-size: 9pt;">
							</p:outputLabel>
						</f:facet>
						<f:facet name="input">
							<p:inputMask id="cep" mask="99999-999" maxlength="8" size="8"
								value="#{endereco.cep}" />
						</f:facet>
					</p:cellEditor>
				</p:column>
				<p:column headerText="#{msgs.CaixaPostal}" width="110">
					<p:cellEditor>
						<f:facet name="output">
							<p:outputLabel value="#{endereco.caixaPostal}"
								style="font-size: 9pt;" converter="stringConverter">
							</p:outputLabel>
						</f:facet>
						<f:facet name="input">
							<p:inputText value="#{endereco.caixaPostal}"
								style="font-size: 9pt; width: 100%" />
						</f:facet>
					</p:cellEditor>
				</p:column>
				<p:column headerText="#{msgs.Estado}" width="60">
					<p:cellEditor>
						<f:facet name="output">
							<p:outputLabel value="#{endereco.estado}" style="font-size: 9pt;">
							</p:outputLabel>
						</f:facet>
						<f:facet name="input">
							<p:selectOneMenu id="listEstado" panelStyle="width:150px"
								effect="fade" style="width:60px" value="#{endereco.estado}"
								converter="estadoConverter" immediate="true">
								<p:ajax event="change" listener="#{estadoMB.onSelectionEstado}"
									update="#{cc.attrs.ajaxComponentRenderHistorico}" />
								<f:selectItem itemLabel="UF" noSelectionOption="true" />
								<f:selectItems value="#{estadoMB.estados}" var="estado"
									itemLabel="#{estado.estadoSigla}" itemValue="#{estado}" />
							</p:selectOneMenu>
						</f:facet>
					</p:cellEditor>
				</p:column>
				<p:column headerText="#{msgs.Cidade}" width="180">
					<p:cellEditor>
						<f:facet name="output">
							<p:outputLabel value="#{endereco.cidade}" style="font-size: 9pt;"
								converter="stringConverter">
							</p:outputLabel>
						</f:facet>
						<f:facet name="input">
							<p:selectOneMenu id="listCidade" panelStyle="width:180px"
								effect="fade" style="width:333px" value="#{endereco.cidade}"
								converter="cidadeConverter" immediate="true" filter="true"
								filterMatchMode="startsWith">
								<f:selectItem itemLabel="Selecionar a Cidade"
									noSelectionOption="true" />
								<f:selectItems value="#{estadoMB.cidadesPorEstado}" var="cidade"
									itemLabel="#{cidade.cidadeNome}" itemValue="#{cidade}" />
							</p:selectOneMenu>
						</f:facet>
					</p:cellEditor>
				</p:column>

				<p:column style="width:55px" rendered="#{cc.attrs.disabledEditar}">
					<p:rowEditor />
				</p:column>

				<p:column style="width:55px" rendered="#{cc.attrs.disabledEditar}">
					<p:commandButton icon="fa fa-trash" />
				</p:column>
			</p:dataTable>
		</p:tab>

	</p:accordionPanel>
</composite:implementation>
</html>